
<!DOCTYPE html>
<html class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content=""Social authentication has been a hot topic for developers and users alike. There are many guides on how to implement it for traditional REST-based APIs, so here’s one for the good guys."">
      
      
      
        <meta name="author" content=""Vince Ning"">
      
      
        <link rel="shortcut icon" href="../../images/favicon.ico">
      
      <meta name="generator" content="mkdocs-0.16.2, mkdocs-material-1.3.0">
    
    
      
        <title>Social Authentication with OAuth + GraphQL</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-56ade86843.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-1d1da4857d.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../css/base.css">
    
      <link rel="stylesheet" href="../../css/styles.css">
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="../.." title="Scaphold Docs" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Tutorials
                </span>
              
            
            Add Social Auth
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <div class="md-search__overlay"></div>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result"></div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source">
          
            


  


  <a href="https://github.com/scaphold-io/scaphold-docs" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          
        </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    Scaphold Docs
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/scaphold-io/scaphold-docs" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Getting Started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/jumpstart-video/" title="Jumpstart Video" class="md-nav__link">
      Jumpstart Video
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/starter-kits/" title="Starter Kits" class="md-nav__link">
      Starter Kits
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Core Data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Core Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../coredata/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../coredata/schema/" title="The Schema" class="md-nav__link">
      The Schema
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../coredata/queries/" title="Queries" class="md-nav__link">
      Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../coredata/mutations/" title="Mutations" class="md-nav__link">
      Mutations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../coredata/subscriptions/" title="Subscriptions" class="md-nav__link">
      Subscriptions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../coredata/connections-pagination/" title="Connections" class="md-nav__link">
      Connections
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Authentication
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Authentication
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../authentication/tokens/" title="Auth Tokens" class="md-nav__link">
      Auth Tokens
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../authentication/permissions/" title="Permissions" class="md-nav__link">
      Permissions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../authentication/social/" title="Social Auth" class="md-nav__link">
      Social Auth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../authentication/super-users/" title="Super Users" class="md-nav__link">
      Super Users
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Realtime Subscriptions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Realtime Subscriptions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../realtime/subscriptions-apollo/" title="Subscriptions With Apollo Client" class="md-nav__link">
      Subscriptions With Apollo Client
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../realtime/subscriptions-react/" title="Subscriptions With React" class="md-nav__link">
      Subscriptions With React
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../realtime/slackr-chat-app/" title="Build Slack Tutorial" class="md-nav__link">
      Build Slack Tutorial
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Custom Logic
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Custom Logic
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../custom-logic/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../custom-logic/composition/" title="Function Composition" class="md-nav__link">
      Function Composition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../custom-logic/pre-operations/" title="Pre Operations" class="md-nav__link">
      Pre Operations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../custom-logic/operation-phase/" title="Operation Phase" class="md-nav__link">
      Operation Phase
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../custom-logic/post-operations/" title="Post Operations" class="md-nav__link">
      Post Operations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../custom-logic/async-operations/" title="Async Operations" class="md-nav__link">
      Async Operations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../custom-logic/logs/" title="Logs & Examples" class="md-nav__link">
      Logs & Examples
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Persisted Queries
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Persisted Queries
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../persisted-queries/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../persisted-queries/getting-started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../persisted-queries/querying-from-client/" title="Querying From Client" class="md-nav__link">
      Querying From Client
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Files
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Files
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../files/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../files/uploading/" title="Uploading" class="md-nav__link">
      Uploading
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../files/querying/" title="Querying" class="md-nav__link">
      Querying
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Integrations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Integrations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/email/" title="Email" class="md-nav__link">
      Email
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/monitoring/" title="Monitoring" class="md-nav__link">
      Monitoring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/passwordless/" title="Passwordless Auth" class="md-nav__link">
      Passwordless Auth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/push/" title="Push Notifications" class="md-nav__link">
      Push Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-6" type="checkbox" id="nav-9-6">
    
    <label class="md-nav__link" for="nav-9-6">
      Search
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-9-6">
        Search
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/search/setup/" title="Setup" class="md-nav__link">
      Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/search/querying/" title="Querying" class="md-nav__link">
      Querying
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-7" type="checkbox" id="nav-9-7">
    
    <label class="md-nav__link" for="nav-9-7">
      Social Auth
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-9-7">
        Social Auth
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/social/setup/" title="Setup" class="md-nav__link">
      Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/social/login-with-native/" title="Login With Native SDKs" class="md-nav__link">
      Login With Native SDKs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/social/login-with-auth0/" title="Login With Auth0" class="md-nav__link">
      Login With Auth0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      App Management
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        App Management
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../app-management/alias/" title="Aliases" class="md-nav__link">
      Aliases
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../app-management/analytics/" title="Analytics" class="md-nav__link">
      Analytics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../app-management/export-schema/" title="Export Schema" class="md-nav__link">
      Export Schema
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../app-management/fork-app/" title="Fork App" class="md-nav__link">
      Fork App
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../app-management/teams/" title="Teams" class="md-nav__link">
      Teams
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../app-management/multi-region/" title="Multi Region" class="md-nav__link">
      Multi Region
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../app-management/admin-tokens/" title="Admin Tokens" class="md-nav__link">
      Admin Tokens
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../app-management/token-expiration/" title="Token Expiration" class="md-nav__link">
      Token Expiration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11" checked>
    
    <label class="md-nav__link" for="nav-11">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../realtime-apps-with-subscriptions/" title="Build A Chat App" class="md-nav__link">
      Build A Chat App
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sending-push-notifications/" title="Sending Push Notifications" class="md-nav__link">
      Sending Push Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ios-push-notifications/" title="Setup iOS Push" class="md-nav__link">
      Setup iOS Push
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../android-push-notifications/" title="Setup Android Push" class="md-nav__link">
      Setup Android Push
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../migrate-mongodb-graphql/" title="Migrating MongoDB" class="md-nav__link">
      Migrating MongoDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../persisted-queries/" title="Using Persisted Queries" class="md-nav__link">
      Using Persisted Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../advanced-queries/" title="Advanced Relational Queries" class="md-nav__link">
      Advanced Relational Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../authentication-in-graphql/" title="Authentication in GraphQL" class="md-nav__link">
      Authentication in GraphQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../search-with-algolia/" title="Add Search With Algolia" class="md-nav__link">
      Add Search With Algolia
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../aggregations-in-graphql/" title="Aggregations In GraphQL" class="md-nav__link">
      Aggregations In GraphQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../apollo-optics-graphql-server/" title="Integrate Apollo Optics" class="md-nav__link">
      Integrate Apollo Optics
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
    <a href="./" title="Add Social Auth" class="md-nav__link md-nav__link--active">
      Add Social Auth
    </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../errors/" title="Errors" class="md-nav__link">
      Errors
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/scaphold-io/scaphold-docs/edit/master/docs/tutorials/adding-social-auth.md" title="Edit this page" class="md-icon md-content__icon">edit</a>
                
                
                <h2 id="how-to-integrate-oauth-with-scapholds-graphql-platform">How to integrate OAuth with <a href="https://scaphold.io">Scaphold's</a> GraphQL platform.</h2>
<p><img alt="" src="https://assets.scaphold.io/community/blog/social-auth-graphql/social-auth-hero.png" /></p>
<p>Hi GraphQL-Lovers!</p>
<p>Social authentication has been a hot topic for developers and users alike. There are many guides on how to implement it for traditional REST-based APIs, so here's one for the good guys.</p>
<p>Why social authentication? It all starts with the users. Most people have online social accounts on Facebook, Twitter, Google, and more. So they're thinking,</p>
<blockquote>
<p>“I'll check out your app if I can just log in with my existing Facebook or Twitter account.”</p>
</blockquote>
<p>The benefits are two-fold.</p>
<ol>
<li>
<p><em>Users</em> are excited to get to remember one less account name and password. Hooray!</p>
</li>
<li>
<p><em>Developers</em> gets more content from these social authentication providers immediately upon log in, like emails, profile pictures, friends, etc…</p>
</li>
</ol>
<p>Here's how it works at a high level:</p>
<p><img alt="Source: https://www.digitalocean.com/community/tutorials/an-introduction-to-oauth-2" src="https://assets.scaphold.io/community/blog/social-auth-graphql/oauth-flow.png" /></p>
<p><em>Source: <a href="https://www.digitalocean.com/community/tutorials/an-introduction-to-oauth-2">https://www.digitalocean.com/community/tutorials/an-introduction-to-oauth-2</a></em></p>
<ol>
<li>
<p>User must grant the application permission to access secured resources from an OAuth provider (i.e. Facebook, Google, etc).</p>
</li>
<li>
<p>After the user successfully grants the application access, the OAuth provider generates a user access token and passes it back to the application.</p>
</li>
<li>
<p>The application sends this user access token to the OAuth provider along with its own identity in order to authenticate.</p>
</li>
<li>
<p>Upon successful authentication, the OAuth provider grants authorization and returns an app access token.</p>
</li>
<li>
<p>Now that authorization is completed, the application may use the app access token for authentication to fetch authorized resources from the OAuth provider.</p>
</li>
<li>
<p>App access token is verified and the requested OAuth provider's resources are sent back to the application.</p>
<blockquote>
<h1 id="this-isnt-easy">This isn't easy!</h1>
</blockquote>
</li>
</ol>
<p>To do this yourself, you will have to perform the same workflow for every OAuth provider you wish to authenticate with. The best tool that we've found to help manage all these connections is <a href="https://auth0.com">Auth0</a>. We'll be using this tool for the GraphQL walkthrough to help us set up OAuth.</p>
<p>Today, we'll explore two of the most popular social providers:</p>
<blockquote>
<p><strong>Facebook</strong> and <strong>Google</strong>.</p>
</blockquote>
<p>Here's the agenda:</p>
<ol>
<li>
<p>Create an Auth0 account.</p>
</li>
<li>
<p>Configure Facebook and Google connections.</p>
</li>
<li>
<p>Use Auth0 account keys to configure an Auth0 integration on <a href="https://scaphold.io">Scaphold</a>.</p>
</li>
<li>
<p>Obtain access token from Facebook client SDK, exchange it for an ID token, and send GraphQL request to authenticate.</p>
</li>
<li>
<p>Store JSON Web Token (JWT) as Authorization header in HTTP requests.</p>
</li>
<li>
<p>Once logged in, send another GraphQL request with a Google ID token to link both social authentication credentials.</p>
</li>
<li>
<p>Voilá!</p>
</li>
</ol>
<p><strong>Let's start by <a href="https://auth0.com/">creating a free Auth0 account</a>.</strong></p>
<p>This will help you manage your app credentials like client IDs and secrets for your OAuth providers. By connecting your apps on your social accounts like Facebook, Google, and Twitter, you'll then have the correct account credentials to utilize these services for your authentication flow.</p>
<p><img alt="" src="https://assets.scaphold.io/community/blog/social-auth-graphql/auth0-providers.png" /></p>
<p>For more information on configuring your social connections on Auth0, check out these guides: <a href="https://auth0.com/docs/connections/social/facebook">Facebook</a> / <a href="https://auth0.com/docs/connections/social/google">Google</a></p>
<p>Once you've tested out your connections to see that they work, <strong>save your Auth0 Domain, Client ID, and Client Secret</strong>.</p>
<p><img alt="" src="https://assets.scaphold.io/community/blog/social-auth-graphql/auth0-scaphold-app.png" /></p>
<p>Next, <strong>configure Auth0 in <a href="https://scaphold.io">Scaphold</a></strong> from the Integrations Portal to include the OAuth providers that you plan to use for your app. This will enable a new mutation in your schema called <strong>loginUserWithAuth0</strong> which you can use to log in users with connected OAuth providers.</p>
<p><img alt="" src="https://assets.scaphold.io/community/blog/social-auth-graphql/auth0-integration.png" /></p>
<p>In your client app, you'll likely be using a client SDK to handle user login. For instance, you can use the <a href="https://github.com/facebook/react-native-fbsdk">Facebook SDK for React Native</a> to ask your users to log in with their existing Facebook accounts. Your app will redirect them to a Facebook sign-in page and once this succeeds, you'll receive an <strong>access token</strong> that you'll verify with your OAuth provider, and then the corresponding <code>idToken</code> will be sent to <a href="https://scaphold.io">Scaphold</a>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nt">const</span> <span class="nt">FBSDK</span> <span class="o">=</span> <span class="nt">require</span><span class="o">(</span><span class="s1">&#39;react-native-fbsdk&#39;</span><span class="o">);</span>
<span class="nt">const</span> <span class="nt">rp</span> <span class="o">=</span> <span class="nt">require</span><span class="o">(</span><span class="s1">&#39;request-promise&#39;</span><span class="o">);</span>

<span class="nt">const</span> <span class="p">{</span>
  <span class="err">LoginButton,</span>
  <span class="err">AccessToken</span>
<span class="p">}</span> <span class="o">=</span> <span class="nt">FBSDK</span><span class="o">;</span>

<span class="nt">var</span> <span class="nt">Login</span> <span class="o">=</span> <span class="nt">React</span><span class="p">.</span><span class="nc">createClass</span><span class="o">(</span><span class="p">{</span>
  <span class="n">render</span><span class="p">:</span> <span class="nf">function</span><span class="p">()</span> <span class="err">{</span>
    <span class="n">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="n">View</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">LoginButton</span>
          <span class="n">publishPermissions</span><span class="o">=</span><span class="err">{</span><span class="cp">[</span><span class="s2">&quot;publish_actions&quot;</span><span class="cp">]</span><span class="p">}</span>
          <span class="nt">onLoginFinished</span><span class="o">=</span><span class="p">{</span>
            <span class="err">(error,</span> <span class="err">result)</span> <span class="err">=&gt;</span> <span class="err">{</span>
              <span class="err">if</span> <span class="err">(error)</span> <span class="err">{</span>
                <span class="err">alert(&quot;login</span> <span class="err">has</span> <span class="n">error</span><span class="p">:</span> <span class="s2">&quot; + result.error);</span>
<span class="s2">              } else if (result.isCancelled) {</span>
<span class="s2">                alert(&quot;</span><span class="n">login</span> <span class="n">is</span> <span class="n">cancelled</span><span class="o">.</span><span class="s2">&quot;);</span>
<span class="s2">              } else {</span>
<span class="s2">                AccessToken.getCurrentAccessToken().then(</span>
<span class="s2">                  (data) =&gt; {</span>

<span class="s2">                    /*</span>
<span class="s2">                     * Use Access Token to retrieve Auth0 ID Token</span>
<span class="s2">                     */</span>

<span class="s2">                    const options = {</span>
<span class="s2">                      method: &#39;POST&#39;,</span>
<span class="s2">                      uri: url,</span>
<span class="s2">                      body: {</span>
<span class="s2">                        client_id: &#39;xxxxxxxxxxx&#39;, // Your Auth0 Client ID</span>
<span class="s2">                        access_token: data.accessToken.toString(),</span>
<span class="s2">                        connection: &#39;facebook&#39;,</span>
<span class="s2">                        scope: &#39;openid&#39;</span>
<span class="s2">                      },</span>
<span class="s2">                      json: true,</span>
<span class="s2">                      resolveWithFullResponse: true</span>
<span class="s2">                    };</span>
<span class="s2">                    return rp(options);</span>
<span class="s2">                  }).then(res =&gt; {</span>

<span class="s2">                    /*</span>
<span class="s2">                     * Example response</span>
<span class="s2">                     * {</span>
<span class="s2">                     *   &quot;</span><span class="n">idToken</span><span class="s2">&quot;: &quot;</span><span class="n">eyJ0eXAiOiJKV1Qi</span><span class="o">...</span><span class="s2">&quot;,</span>
<span class="s2">                     *   &quot;</span><span class="n">access_token</span><span class="s2">&quot;: &quot;</span><span class="n">A9CvPwFojaBI</span><span class="o">...</span><span class="s2">&quot;,</span>
<span class="s2">                     *   &quot;</span><span class="n">token_type</span><span class="s2">&quot;: &quot;</span><span class="n">bearer</span><span class="s2">&quot;</span>
<span class="s2">                     * }</span>
<span class="s2">                     */</span>

<span class="s2">                    alert(res.body.idToken);</span>

<span class="s2">                    /*</span>
<span class="s2">                     * Send Scaphold login mutation (shown below)</span>
<span class="s2">                     */</span>

<span class="s2">                  }).catch(err =&gt; {</span>
<span class="s2">                    logger.error(err);</span>
<span class="s2">                    throw httpError(403, err);</span>
<span class="s2">                  });</span>
<span class="s2">                )</span>
<span class="s2">              }</span>
<span class="s2">            }</span>
<span class="s2">          }</span>
<span class="s2">          onLogoutFinished={() =&gt; alert(&quot;</span><span class="n">logout</span><span class="o">.</span><span class="err">&quot;</span><span class="p">)}</span><span class="o">/&gt;</span>
      <span class="o">&lt;/</span><span class="nt">View</span><span class="o">&gt;</span>
    <span class="o">);</span>
  <span class="err">}</span>
<span class="err">}</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<p>Given the <code>idToken</code>, here's the <strong>GraphQL mutation you can use to log your user in</strong> to <a href="https://scaphold.io">Scaphold</a>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>// GraphQL Mutation

mutation LoginUserWithAuth0 ($input: LoginUserWithAuth0Input!) {
  loginUserWithAuth0 (input: $input) {
    user {
      id
      username
      createdAt
    }
  }
}

// Variables

{
  &quot;input&quot;: {
    &quot;idToken&quot;: &quot;eyJ0eXAiOiJKV1Qi...&quot; // idToken from above
  }
}
</pre></div>
</td></tr></table>

<p>Once you've sent that request, the response should resemble this:</p>
<p><img alt="" src="https://assets.scaphold.io/community/blog/social-auth-graphql/auth-graphiql.png" /></p>
<p>After <a href="https://scaphold.io">Scaphold</a> securely logs the user in with the <code>idToken</code>, we'll pass back the newly generated <code>idToken</code> that you'll need to <strong>add to your Authorization header</strong> for future requests.
That way, Scaphold will be able to authenticate you to make future requests through Scaphold, and it will also provide us the capability to work on that user's behalf to access the OAuth provider's resources.
In this case, we could authorize you to access their Facebook friends and their public profile information.</p>
<p><img alt="" src="https://assets.scaphold.io/community/blog/social-auth-graphql/auth-header.png" /></p>
<p>In addition, if you've logged in already and you make the same request again but with a new OAuth provider (i.e. Google), Scaphold will <strong>link your two accounts together</strong>, since we know the requests being made belong to the same user.</p>
<p>In a similar fashion to the Facebook work flow from earlier, you'll likely use a <a href="https://github.com/devfd/react-native-google-signin">client SDK for Google sign-in</a>. Upon logging in, you'll receive an access token and again verify it with the OAuth provider like so:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>GoogleSignin.signIn().then((user) =&gt; {
  /*
   * Send Access Token to Scaphold (shown below)
   */
  const options = {
    method: &#39;POST&#39;,
    uri: url,
    body: {
      client_id: &#39;xxxxxxxxxxx&#39;, // Your Auth0 Client ID
      access_token: user.accessToken,
      connection: &quot;google_oauth2&quot;,
      scope: &#39;openid&#39;
    },
    json: true,
    resolveWithFullResponse: true
  };
  return rp(options);
}).then(res =&gt; {
  alert(res.body.idToken);

  /*
   * Send Scaphold login mutation (like earlier above)
   */

}).catch((err) =&gt; {
  console.log(&#39;WRONG SIGNIN&#39;, err);
}).done();
</pre></div>
</td></tr></table>

<p>With this <code>idToken</code>, you'll <strong>send a GraphQL request to Scaphold the same way as earlier</strong>.</p>
<p>Congratulations! Now, you'll have access to both Facebook and Google information using your users' Facebook and Google account credentials. Thanks for checking this out, and check out our <a href="https://scaphold.io/community">community page</a> for more tutorials on simple ways to get started with GraphQL!</p>
<div class="row" style="text-align: center; padding: 25px 0">
    <img src="https://assets.scaphold.io/images/scaphold-logo.png" alt="Scaphold" style="max-width: 25%">
    <div><em>Brought to you by <a href="https://scaphold.io">Scaphold.io</a></em></div>
</div>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../apollo-optics-graphql-server/" title="Integrate Apollo Optics" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Integrate Apollo Optics
              </span>
            </div>
          </a>
        
        
          <a href="../../errors/" title="Errors" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Errors
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-7aa26ad9ec.js"></script>
      <script>app.initialize({url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>